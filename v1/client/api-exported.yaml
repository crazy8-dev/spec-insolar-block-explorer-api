openapi: 3.0.0
info:
  version: 1.0.0
  title: Insolar Explorer API
  contact:
    name: Insolar dev team
    url: 'https://insolar.io/team.html'
    email: dev-support@insolar.io
  description: >
    [Insolar Explorer](https://github.com/insolar/block-explorer)'s REST API
    documentation.


    Insolar Explorer is a service that allows users to search for and view the
    contents of individual transactions, Records, Lifelines, Jet Drops and Jets.


    * Record—minimum unit of storage that contains an associated request,
    response, and maintenance details

    * Lifeline—sequence of Records for object state where an object is a smart
    contract instance

    * Jet Drop—unit of storage for Jets

    * Jet—groups of Lifelines
servers:
  - url: example.com
    description: Test server.
tags:
  - name: Pulse
    description: >-
      Trigger for the production of a new Jet Drop. Also serves as the default
      time unit on Insolar Network.
  - name: Jet Drop
    description: >-
      Unit of storage for Jets. Contains all Records that are registered within
      a Pulse and associated with a particular Jet.
  - name: Record
    description: >-
      Minimum unit of storage that contains an associated request, response, and
      maintenance details.
  - name: Search
    description: Searching filters.
paths:
  /api/v1/pulses:
    get:
      summary: Pulses
      description: Get Pulses
      operationId: pulses
      tags:
        - Pulse
      parameters:
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offsetParam'
        - $ref: '#/components/parameters/fromPulseNumberParam'
        - $ref: '#/components/parameters/timestamp_lte'
        - $ref: '#/components/parameters/timestamp_gte'
      responses:
        '200':
          $ref: '#/components/responses/pulsesResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '500':
          $ref: '#/components/responses/500Response'
  '/api/v1/pulses/{pulse_number}':
    get:
      summary: Pulse
      description: Get Pulse
      operationId: pulse
      tags:
        - Pulse
      parameters:
        - $ref: '#/components/parameters/pulse_number_path'
      responses:
        '200':
          $ref: '#/components/responses/pulseResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '404':
          $ref: '#/components/responses/404Response'
        '500':
          $ref: '#/components/responses/500Response'
  '/api/v1/jet-drops/{jet_drop_id}':
    get:
      summary: Jet Drop by ID
      description: Get Jet Drop by ID
      operationId: jetDropByID
      tags:
        - Jet Drop
      parameters:
        - $ref: '#/components/parameters/jet_drop_id_path'
      responses:
        '200':
          $ref: '#/components/responses/jetDropResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '404':
          $ref: '#/components/responses/404Response'
        '500':
          $ref: '#/components/responses/500Response'
  '/api/v1/pulses/{pulse_number}/jet-drops':
    get:
      summary: Jet Drops by Pulse number
      description: Get Jet Drops by Pulse number
      operationId: JetDropsByPulseNumber
      tags:
        - Jet Drop
      parameters:
        - $ref: '#/components/parameters/pulse_number_path'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offsetParam'
        - $ref: '#/components/parameters/from_jet_drop_id'
      responses:
        '200':
          $ref: '#/components/responses/jetDropsResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '500':
          $ref: '#/components/responses/500Response'
  '/api/v1/jets/{jet_id}/jet-drops':
    get:
      summary: Jet Drops by Jet ID
      description: Get Jet Drops by Jet ID
      operationId: JetDropsByJetID
      tags:
        - Jet Drop
      parameters:
        - $ref: '#/components/parameters/jet_id_path'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offsetParam'
        - $ref: '#/components/parameters/from_jet_drop_id'
        - $ref: '#/components/parameters/sort_by_pulse'
        - $ref: '#/components/parameters/jet_drop_id_lt'
        - $ref: '#/components/parameters/jet_drop_id_gt'
      responses:
        '200':
          $ref: '#/components/responses/jetDropsResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '500':
          $ref: '#/components/responses/500Response'
  '/api/v1/jet-drops/{jet_drop_id}/records':
    get:
      summary: Jet Drop Recods
      description: Get all Records from a Jet Drop
      operationId: jet_drop_records
      tags:
        - Record
      parameters:
        - $ref: '#/components/parameters/jet_drop_id_path'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offsetParam'
        - $ref: '#/components/parameters/from_index'
        - $ref: '#/components/parameters/recordTypeParam'
      responses:
        '200':
          $ref: '#/components/responses/recordsResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '500':
          $ref: '#/components/responses/500Response'
  '/api/v1/lifeline/{object_reference}/records':
    get:
      summary: Object Lifeline
      description: Get object Lifeline
      operationId: object_lifeline
      tags:
        - Record
      parameters:
        - $ref: '#/components/parameters/object_reference_path'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offsetParam'
        - $ref: '#/components/parameters/from_index'
        - $ref: '#/components/parameters/sort_by_index'
        - $ref: '#/components/parameters/pulse_number_lt'
        - $ref: '#/components/parameters/pulse_number_gt'
        - $ref: '#/components/parameters/timestamp_lte'
        - $ref: '#/components/parameters/timestamp_gte'
      responses:
        '200':
          $ref: '#/components/responses/recordsResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '500':
          $ref: '#/components/responses/500Response'
  /api/v1/search:
    get:
      summary: Search Data
      operationId: search
      tags:
        - Search
      parameters:
        - name: value
          in: query
          required: true
          schema:
            type: string
          description: Searching value
      responses:
        '200':
          $ref: '#/components/responses/searchResponse'
        '400':
          $ref: '#/components/responses/400Response'
        '404':
          $ref: '#/components/responses/404Response'
        '500':
          $ref: '#/components/responses/500Response'
components:
  parameters:
    limit:
      in: query
      name: limit
      description: Number of entries per list.
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      example: limit=100
    offsetParam:
      in: query
      name: offset
      description: Number of entries to skip before collecting the result set.
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
      example: offset=10
    fromPulseNumberParam:
      in: query
      name: from_pulse_number
      description: Pulse number to paginate from.
      required: false
      schema:
        type: integer
        format: int64
        minimum: 0
      example: from_pulse_number=43612021
    timestamp_lte:
      in: query
      name: timestamp_lte
      description: Upper limit (≤) for timestamp in a query.
      required: false
      schema:
        type: integer
        format: int64
        description: Unix timestamp.
      example: timestamp_lte=1451743413
    timestamp_gte:
      in: query
      name: timestamp_gte
      description: Lower limit (≥) for timestamp in a query.
      required: false
      schema:
        type: integer
        format: int64
        description: Unix timestamp.
      example: timestamp_gte=1451743413
    pulse_number_path:
      in: path
      name: pulse_number
      required: true
      schema:
        type: integer
        format: int64
        minimum: 0
      description: Pulse number.
      example: pulse_number=43648102
    jet_drop_id_path:
      name: jet_drop_id
      in: path
      required: true
      schema:
        type: string
      description: Jet Drop ID.
      example: 'jet_drop_id=43648102:0010'
    from_jet_drop_id:
      name: from_jet_drop_id
      in: query
      required: false
      schema:
        type: string
      description: >-
        Jet Drop ID to paginate from. Jet Drop ID is a comnibation of jet_id
        with pulse_number.
      example: 'from_jet_drop_id=43612021:3'
    jet_id_path:
      in: path
      name: jet_id
      required: true
      schema:
        type: string
      description: The JetID.
      example: jet_id=0010
    sort_by_pulse:
      in: query
      name: sort_by
      description: Pulse number-based sorting direction for a query result set.
      required: false
      schema:
        type: string
        default: +pulse_number
        enum:
          - '-pulse_number'
          - +pulse_number
      example: sort_by=+pulse_number
    jet_drop_id_lt:
      in: query
      name: jet_drop_id_lt
      description: Upper limit (<) for Jet Drops in a query.
      required: false
      schema:
        type: string
      example: 'jet_drop_id_lt=43648104:00102'
    jet_drop_id_gt:
      in: query
      name: jet_drop_id_gt
      description: Lower limit (>) for Jet Drops in a query.
      required: false
      schema:
        type: string
      example: 'jet_drop_id_gt=43648102:0010'
    from_index:
      name: from_index
      description: >-
        Index to paginate from. Index is a combination of pulse_number with
        order (Record number in a Jet Drop).
      in: query
      required: false
      schema:
        type: string
      example: 'from_index=43612021:3'
    recordTypeParam:
      name: type
      in: query
      description: Record type in a query.
      required: false
      schema:
        type: string
        enum:
          - state
          - request
          - result
      example: type=state
    object_reference_path:
      name: object_reference
      in: path
      required: true
      schema:
        type: string
      description: Object reference.
      example: 'object_reference=insolar:1AAEAAS2JLnvh2bkLUUlUijqcp7--k8_GIz9qLKxZXLE'
    sort_by_index:
      in: query
      name: sort_by
      description: Index-based sorting direction for a query result set.
      required: false
      schema:
        type: string
        default: +index
        enum:
          - '-index'
          - +index
      example: sort_by=+index
    pulse_number_lt:
      in: query
      name: pulse_number_lt
      description: Upper limit (<) for Pulse number in a query.
      required: false
      schema:
        type: integer
        minimum: 0
      example: pulse_number_gt=43648106
    pulse_number_gt:
      in: query
      name: pulse_number_gt
      description: Lower limit (>) for Pulse number in a query.
      required: false
      schema:
        type: integer
        minimum: 0
      example: pulse_number_gt=43648104
  responses:
    pulsesResponse:
      description: Paginated array of Pulses.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/pulses'
    400Response:
      description: >
        Bad request. One or more of the query parameters failed validation or
        were not provided.

        Change parameters and repeat your request.

        Fields that failed validation will be detailed where possible.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/code-validation-error'
    500Response:
      description: Internal server error. Unable to process the request due to an error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/code-error'
    pulseResponse:
      description: Pulse.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/pulse'
    404Response:
      description: Not found. Specified resource does not exist. No response body required.
    jetDropResponse:
      description: Jet Drop.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/jet-drop'
    jetDropsResponse:
      description: Paginated array of Jet Drops.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/jet-drops'
    recordsResponse:
      description: Paginated array of Records grouped by Lifeline.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/records'
    searchResponse:
      description: Search result set.
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/search-pulse'
              - $ref: '#/components/schemas/search-record'
              - $ref: '#/components/schemas/search-jet-drop'
              - $ref: '#/components/schemas/search-lifeline'
  schemas:
    pulses:
      description: A paged array of Pulses.
      type: object
      properties:
        total:
          type: integer
          format: int64
          description: Total results.
          example: 100
        result:
          type: array
          items:
            $ref: '#/components/schemas/pulse'
    code-validation-error:
      description: Response codes.
      type: object
      properties:
        code:
          type: string
        message:
          type: string
        description:
          type: string
        link:
          type: string
        validation_failures:
          type: array
          items:
            $ref: '#/components/schemas/code-validation-failures'
    code-error:
      description: Response codes.
      type: object
      properties:
        code:
          type: string
        message:
          type: string
        description:
          type: string
    pulse:
      description: Pulse representation.
      type: object
      properties:
        pulse_number:
          type: integer
          format: int64
          description: Pulse number.
          example: 43648102
        prev_pulse_number:
          type: integer
          format: int64
          description: Previous pulse number.
          example: 43648092
        next_pulse_number:
          type: integer
          format: int64
          description: Next pulse number.
          example: 43648112
        jet_drop_amount:
          type: integer
          format: int64
          description: Number of all Jet Drops in the Pulse.
          example: 16
        record_amount:
          type: integer
          format: int64
          description: Number of all Records in the Pulse.
          example: 245
        timestamp:
          type: integer
          format: int64
          description: Unix timestamp.
          example: 1451743413
        is_complete:
          type: boolean
          description: Pulse completeness status.
          example: true
    jet-drop:
      description: Jet Drop representation.
      type: object
      properties:
        jet_drop_id:
          type: string
          description: Jet Drop ID is a combination of jet_id with pulse_number.
          example: '43648102:0010'
          pattern: '^(\d+:[0-1]{2,64})$'
        next_jet_drop_id:
          type: array
          format: string
          description: Next jet_drop_id.
          example:
            - '43648104:00100'
            - '43648104:00101'
          items:
            type: string
            description: Jet Drop ID is a combination of jet_id with pulse_number.
            example: '43648102:0010'
            pattern: '^(\d+:[0-1]{2,64})$'
        prev_jet_drop_id:
          type: array
          format: string
          description: Previous jet_drop_id.
          example:
            - '43648101:0010'
          items:
            type: string
            description: Jet Drop ID is a combination of jet_id with pulse_number.
            example: '43648102:0010'
            pattern: '^(\d+:[0-1]{2,64})$'
        jet_id:
          type: string
          description: Jet ID.
          example: '0010'
          pattern: '^([0-1]{2,64})$'
        pulse_number:
          type: integer
          format: int64
          description: Pulse number.
          example: 43612021
        record_amount:
          type: integer
          format: int64
          description: Number of all Records in the Pulse.
          example: 245
        timestamp:
          type: integer
          format: int64
          description: Unix timestamp.
          example: 1451743413
        hash:
          type: string
          description: Record hash.
          example: >-
            0JfQtNC10YHRjCDQvNC+0LPQu9CwINCx0YvRgtGMINCy0LDRiNCwINGA0LXQutC70LDQvNCw
    jet-drops:
      description: A paginated array of Pulses.
      type: object
      properties:
        total:
          type: integer
          format: int64
          description: Total results.
          example: 100
        result:
          type: array
          items:
            $ref: '#/components/schemas/jet-drop'
    records:
      description: A paginated array of Records.
      type: object
      properties:
        total:
          type: integer
          format: int64
          description: Total results.
          example: 100
        result:
          type: array
          items:
            $ref: '#/components/schemas/record'
    search-pulse:
      description: Pulse response for a search query.
      title: Pulse response
      type: object
      properties:
        type:
          type: string
          description: Result type.
          enum:
            - pulse
          example: pulse
        meta:
          type: object
          description: Meta data.
          properties:
            pulse_number:
              type: integer
              format: int64
              description: Pulse Number.
              example: 1
    search-record:
      description: Record response for Search.
      title: Record response
      type: object
      properties:
        type:
          type: string
          description: Result type.
          enum:
            - record
          example: record
        meta:
          type: object
          description: Meta data.
          properties:
            object_reference:
              type: string
              description: Object reference.
              example: 'insolar:1AAEAAS2JLnvh2bkLUUlUijqcp7--k8_GIz9qLKxZXLE'
              pattern: '^insolar:(0[a-zA-Z0-9_-]{2,43}|1[a-zA-Z0-9_-]{42,43})$'
            index:
              type: string
              description: Index is concatenation of pulse_number and order.
              example: '43648102:7'
    search-jet-drop:
      description: Jet Drop response for a search query.
      title: Jet Drop response
      type: object
      properties:
        type:
          type: string
          description: Result type.
          enum:
            - jet-drop
          example: jet-drop
        meta:
          type: object
          description: Meta data.
          properties:
            jet_drop_id:
              type: string
              description: Jet Drop ID.
              example: '43612021:001'
    search-lifeline:
      description: Lifeline response for a search query.
      title: Lifeline response
      type: object
      properties:
        type:
          type: string
          description: Result type.
          enum:
            - lifeline
          example: lifeline
        meta:
          type: object
          description: Meta data.
          properties:
            object_reference:
              type: string
              description: Object reference.
              example: 'insolar:1AAEAAS2JLnvh2bkLUUlUijqcp7--k8_GIz9qLKxZXLE'
    code-validation-failures:
      description: Validation failure.
      type: object
      properties:
        property:
          type: string
          description: Property name.
        failure_reason:
          type: string
          description: Failure reason.
    record:
      description: Record representation.
      type: object
      properties:
        reference:
          type: string
          description: Record reference.
          example: 'insolar:1Apn2LmIL4ehiZ5NN0fLo5qJR7CeodnLDUtmvI9TrWVw.record'
          pattern: '^insolar:1[a-zA-Z0-9_-]{42,43}\.record$'
        prev_record_reference:
          type: string
          description: Previous record reference.
          example: 'insolar:1Apn2LmIL4ehiZ5NN0fLo5qJR7CeodnLDUtmvI9TrWVy.record'
          pattern: '^insolar:1[a-zA-Z0-9_-]{42,43}\.record$'
        object_reference:
          type: string
          description: Object reference.
          example: 'insolar:1AAEAAS2JLnvh2bkLUUlUijqcp7--k8_GIz9qLKxZXLE'
          pattern: '^insolar:(0[a-zA-Z0-9_-]{2,43}|1[a-zA-Z0-9_-]{42,43})$'
        prototype_reference:
          type: string
          description: Prototype reference.
          example: 'insolar:1Ajx0cKvLPzFwV-vW4jp-wuuwUcDv1lgvQFrIAvQYH3g'
          pattern: '^insolar:(0[a-zA-Z0-9_-]{2,43}|1[a-zA-Z0-9_-]{42,43})$'
        type:
          type: string
          description: Record type.
          enum:
            - state
            - request
            - result
          example: state
        timestamp:
          type: integer
          format: int64
          description: Unix timestamp.
          example: 1451743413
        payload:
          type: string
          description: Record payload.
          example: >-
            0KLQvtC/INC60L7QvdGC0LXQvdGCLCDQu9GD0YfRiNCw0Y8g0L/Qu9Cw0YLRhNC+0YDQvNCw
        hash:
          type: string
          description: Record hash.
          example: >-
            0JfQtNC10YHRjCDQvNC+0LPQu9CwINCx0YvRgtGMINCy0LDRiNCwINGA0LXQutC70LDQvNCw
        pulse_number:
          type: integer
          format: int64
          description: Pulse number.
          example: 436120213
        jet_id:
          type: string
          description: Jet ID.
          example: '0010'
          pattern: '^([0-1]{2,64})$'
        jet_drop_id:
          type: string
          description: Jet Drop ID is a combination of jet_id with pulse_number.
          example: '43648102:0010'
        order:
          type: integer
          format: int64
          description: Order is the Record order number in the Jet Drop.
          example: '3'
        index:
          type: string
          description: >-
            Index is combination of pulse_number with order (Record number in a
            Jet Drop).
          example: '43648102:7'
